<Directory />
  Options FollowSymLinks
  AllowOverride None
</Directory>

<VirtualHost *:80>
  ServerAlias localhost
  ServerAdmin root@localhost
  DocumentRoot /var/www/html

  RewriteEngine On

  # Set headers for the forward
  RequestHeader set X-Forwarded-Proto "http"
  RequestHeader set X-Forwarded-Port "80"

  include conf.d/cloudway_proxy.inc
</VirtualHost>

<VirtualHost *:443>
  ServerAlias localhost
  ServerAdmin root@localhost
  DocumentRoot /var/www/html

  SSLEngine On
  SSLProxyEngine On
  SSLCertificateFile /etc/pki/tls/certs/localhost.crt
  SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
  SSLProtocol -ALL +SSLv3 +TLSv1
  SSLProxyProtocol -ALL +SSLv3 +TLSv1
  SSLCipherSuite "ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM"

  RewriteEngine On

  # Set headers for the forward
  RequestHeader set X-Forwarded-Proto "https"
  RequestHeader set X-Forwarded-Port "443"
  RequestHeader set X-Forwarded-SSL-Client-Cert %{SSL_CLIENT_CERT}e

  include conf.d/cloudway_proxy.inc
</VirtualHost>

ProxyPreserveHost On
ProxyTimeout 300
TraceEnable Off
